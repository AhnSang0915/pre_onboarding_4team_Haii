# Haii_API

## 📌 개요
- Admin용 데이터 관리 프로그램


## 📌 구현 기능
```
1. 회원가입 기능
- 필수 구현
  - 이름, 아이디, 패스워드, 전화번호, 담당 지역을 파라미터로 받아 대표 관리자와 지역별 담당자를 ‘유저' 테이블에 생성합니다. 단, 대표 관리자는 특정 담당 지역을 가지고 있지 않습니다.
  - 대표 관리자는 모든 데이터를 읽고 쓸 수 있는 권한을 가집니다.
  - 각 지역별 담당자는 데이터를 조회할 수 있는 권한만을 가집니다.

2. 로그인 기능
- 필수 구현
  - 대표 관리자와 지역별 담당자는 회원가입 시 작성한 아이디와 패스워드를 가지고 로그인을 할 수 있습니다.
  - JWT 인증방식을 사용하여 사용자 인증을 처리합니다.
  - 유효한 토큰값인지 검증해야 합니다.
- 선택 구현 (가산점)
  - 토큰이 만료되면 재발급을 받습니다. 인증을 진행하지 않고 재발급 받기 위해 Refresh-Token을 생성해보세요.

3. 회원 정보 수정 기능
- 필수 구현
  - 대표 관리자는 자신 또는 지역별 담당자의 이름, 전화번호, 담당 지역을 수정할 수 있습니다.단, 대표 관리자는 특정 담당 지역을 가지고 있지 않습니다.
- 선택 구현 (가산점)
  - 데이터베이스에서 업데이트된 시점을 알 수 있도록 컬럼을 추가합니다.

4. 회원 정보 수정 기능
- 필수 구현
  - 대표 관리자는 자신 또는 지역별 담당자의 이름, 전화번호, 담당 지역을 수정할 수 있습니다.단, 대표 관리자는 특정 담당 지역을 가지고 있지 않습니다.
- 선택 구현 (가산점)
  - 데이터베이스에서 업데이트된 시점을 알 수 있도록 컬럼을 추가합니다.

5. JSON 데이터 파싱 후, 데이터베이스 저장
- 필수 구현
  - 대표 관리자가 ‘치매센터’ 테이블에 각 치매센터에 대한 상세 데이터를 저장합니다.
- 선택 구현 (가산점)
  - ‘치매센터’ 테이블에 모든 데이터를 넣을 필요는 없습니다. 각 지역별 담당자들은 담당자가 속한 지역에 대한 데이터만을 조회할 수 있다는 것을 명심하여 인덱스, 릴레이션 등을 고려하여 데이터베이스 스키마를 자유롭게 설계해보세요.

6. 엑셀 다운로드 기능
- 필수 구현
  - 각 지역별 담당자는 해당 지역에 대한 데이터만을 조회하여 엑셀 파일로 다운로드받을 수 있어야 하며, 이때 해당 지역은 ‘시/도’ 단위로 구분됩니다.
  - 엑셀 컬럼 명은 JSON 데이터 필드명과 동일해야 합니다.
- 선택 구현 (가산점)
  - 아래의 조회 조건을 추가합니다.
  - ‘치매센터명', ‘운영기관대표자명', ‘운영기관전화번호': 단어 부분 검색 가능
  - ‘치매센터유형': 모든 단어 일치
  - ‘의사인원수’, ‘간호사인원수', ‘사회복지사인원수': 일정 숫자 이상 검색 가능
```

    
## 📌 적용 기술

- 사용언어 : `Javascript`
- 런타임 환경 : `Node.js`
- 프레임워크 : `Express`
- 데이터베이스 : `Mysql`

## 실행방법

### 1.해당 레포지토리를 clone합니다.

```
git clone https://github.com/AhnSang0915/pre_onboarding_4team_Haii
```

### 2. 다운 받으신 폴더로 들어갑니다

```
cd pre_onboarding_4team_Haii
```

### 3. 의존성들을 설치합니다.

```
npm i
```

### 4. 실행시킵니다!

```
npm start
```

### 📌DB 모델링 및  조건 및 졔약사항
<img width="958" alt="스크린샷 2022-10-09 오후 10 17 01" src="https://user-images.githubusercontent.com/68211978/194759127-654beda6-cd2f-45c3-85c1-652d6870ddb0.png">


## 📌 프로젝트 구조
Layered achitecture으로 routers - controllers - services - models
```
📦Haii
 ┣ 📂controllers
 ┣ 📂database
 ┣ 📂middleware
 ┣ 📂models
 ┣ 📂modules
 ┣ 📂prisma
 ┣ 📂routes
 ┣ 📂services
 ┣ 📜index.js
 ┣ 📜package-lock.json
 ┣ 📜package.json
 ┗ 📜server.js
```
## 📌 swagger API
### swagger 명세서 확인 순서
```
npm start
```
```
http://localhost:8000/api-docs/
```


## 📌 구현 기능 소개 swaggerAPI test 방법
- 박 지은 - 회원가입 기능
    


- 안 수철 - 엑셀 다운로드 기능(선택 구현)
   

- 이 해연 - 회원 정보 수정 기능
   


- 김 현정 - 엑셀 다운로드 기능(필수 구현)




- 최 정훈 - 로그인 기능
  - user/login 명세서의 try it out을 클릭 후 body값에 아래의 값을 넣어 Execute 진행
      - 로그인 기능 설명
      - test
```
{
    "email":"aaa123@Haii.com", 
    "password":"a12345678@"
}
```
<img width="1403" alt="스크린샷 2022-10-09 오후 10 29 03" src="https://user-images.githubusercontent.com/68211978/194759590-bc510e91-f21b-4b06-8275-1b860ced6f7e.png">


- 안 상현 - JSON 데이터 파싱 후, 데이터베이스 저장
   


## 📌 Commit Convention
```
Feat(Add) : 새로운 기능 추가 
Fix : 버그 수정 
Docs : 문서 수정 
Style : 코드 포맷팅, 세미콜론 누락, 코드 변경이 없는 경우 
Refactor: 코드 수정
Test : 테스트 코드, 리펙토링 테스트 코드 추가 
Comment: 필요한 주석 추가 및 변경
Rename: 파일 혹은 폴더명을 수정하거나 옮기는 작업만인 경우
Remove: 파일을 삭제하는 작업만 수행하는경우

```
